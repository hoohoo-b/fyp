<!DOCTYPE HTML>
<meta charset="utf-8">
<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
<style type="text/css">

.node--leaf circle {
   stroke-linecap: round;
   stroke-width: 0.5;
   stroke: black;
}

line.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
}

</style>

<body>
<script>

var w = 1280,
    h = 800,
    root,
    node;

var color = d3.scaleOrdinal(d3.schemeCategory20b);

/*var simulation = d3.forceSimulation()
   .force("link", d3.forceLink().id(function(d) { return d.id; }))
   .force("charge", d3.forceManyBody())
   .force("center", d3.forceCenter( w/2, h/2 ));
*/
var vis = d3.select("body").append("svg:svg")
    .attr("width", w)
    .attr("height", h)
      .append('g')
      .attr("transform", "translate(1,1)");

/*var stratify = d3.stratify()
   .id(function(d) { return d.id; })
   .parentId(function(d) { return d.group; });
*/
var pack = d3.pack()
   .size([w-2,h-2])
   .padding(3);

d3.json("clustering_with_5000_AMAZING.json", function(error, data) {
   var root = d3.hierarchy(data)
      .count();

   pack(root);

   var node = vis.selectAll("g")
      .data(root.descendants())
      .enter().append("g")
         .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
         .attr("class", function(d) { return "node" + (d.children ? d.depth ? " node--internal" : " node--root" : " node--leaf"); })
         .each(function(d) { d.node = this; });
   // { return d.parent ? d.children ? "node" : "node node--leaf" : "node node--root"; }

   node.append("circle")
      .attr("id", function(d) { return "node-" + d.data.name; })
      .attr("r", function(d) { return d.r; })
      .style("fill", function(d) { if (d.data.name==="root") {return "none";} else {return color(d.data.truth);}})
         
   vis.selectAll(".node--internal").select("circle")
         .style("fill", "lightblue");

   node.append("title")
      .text(function(d) { return d.data.name; });
});
</script>
</body>
<!-- I tried to do the collapsible force layout, but this recipe calls for LINKS. so... I will move down to just do circle packing first. -->